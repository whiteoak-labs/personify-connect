Ext.define("Personify.controller.phone.directory.contactinfo.Website",{extend:"Personify.controller.profile.Website",requires:["Personify.view.phone.directory.contactinfo.WebsiteList","Personify.view.phone.directory.contactinfo.WebsiteEditForm"],config:{typeList:null,typeListToRemove:null,recordsForDelete:new Array(),errorMessage:"\n- Wrong website format:",blankErrorMessage:"- Website field cannot be empty"},control:{infoContainer:{typelistchange:"onTypeListChange",textboxchange:"onTextboxChange",deleteCommand:"onDeleteCommand"},websitesTitle:true},setRecord:function(a){if(a){if(this.getIsEditing()){this.updateEditMode(true);return}if(a.EntryProfile.getAt(0).UrlsProfile.getCount()>0){this.getInfoContainer().removeAll(true,true);var b=Ext.create("Personify.view.phone.directory.contactinfo.WebsiteList",{scrollable:null,disableSelection:true});b.setStore(a.EntryProfile.getAt(0).UrlsProfile);this.getInfoContainer().add(b);this.getView().setHidden(false)}else{this.getView().setHidden(true)}}},updateEditMode:function(c){this.getView().setHidden(false);me=this;this.getInfoContainer().removeAll(true,true);if(c==true){var d=new Array();var b=this.getView().getRecord();this.setTypeList(b.get("urlLocationList").split(","));var a=b.EntryProfile.getAt(0).UrlsProfile;a.each(function(e){var f=Ext.create("Personify.view.phone.directory.contactinfo.WebsiteEditForm");f.getController().setTypeList(me.getTypeList());f.setRecord(e);me.getInfoContainer().add(f);d.push(e.get("type"))});this.setTypeListToRemove(d);this.addEmptyItem();this.updateTypeListForAllEditItems()}else{this.setRecord(this.getView().getRecord())}},addEmptyItem:function(){var b=this.checkTypeList();if(b.length==0){this.setCanAddMoreFlag(false);return}else{this.setCanAddMoreFlag(true)}var a=this.getInfoContainer();var b=Ext.Array.difference(this.getTypeList(),this.getTypeListToRemove());var c=Ext.create("Personify.view.phone.directory.contactinfo.WebsiteEditForm");c.getController().setTypeList(b);this.getTypeListToRemove().push(b[0]);a.add(c)},updateTitleClass:function(a){this.getWebsitesTitle().setCls(a)}});