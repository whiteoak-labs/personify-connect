Ext.define("Personify.controller.phone.exhibitor.AllExhibitorPanelPhone",{extend:"Personify.base.Controller",control:{allExhibitorTitleBar:true,searchFieldAllExhibitorPanelPhone:{onClearIconTap:"onClearIconTapAllExhibitorPanelPhone",onTextChange:"onTextChangeAllExhibitorPanelPhone"},btnOpenMyExhibitorsList:{tap:"onTapBtnOpenMyExhibitorsList"},allExhibitorListPhone:{itemtap:"onTapAllExhibitorListPhoneItem"}},setRecord:function(a){if(a){var b=a.ExhibitorStore;this.getAllExhibitorTitleBar().setHtml(Personify.utils.ItemUtil.getShortContent(a.get("shortName"),48));if(b){b.clearFilter();this.getAllExhibitorListPhone().setStore(b);this.updateLayoutExhibitorList()}else{this.onGetData(a)}}},onGetData:function(b){var d=this,e={ItemsPerPage:"10",XbtID:b.get("xbtProductID"),XbtParentProduct:b.get("xbtParentProduct"),StartIndex:"0",XbtProductCode:b.get("xbtProductCode")},f=Personify.utils.ServiceManager.getStoreManager(),a=f.getExhibitorStore(),c=Ext.create(a);c.setDataRequest(e);b.ExhibitorStore=c;c.load({callback:function(h,g,i){if(h.length>0){d.getAllExhibitorListPhone().setStore(b.ExhibitorStore);this.updateLayoutExhibitorList()}},scope:d})},onClearIconTapAllExhibitorPanelPhone:function(){this.getAllExhibitorListPhone().getStore().clearFilter();this.getAllExhibitorListPhone().deselectAll();this.updateLayoutExhibitorList()},onTextChangeAllExhibitorPanelPhone:function(b){var a=this.getAllExhibitorListPhone().getStore();if(a){a.clearFilter();if(b.trim()!=""){a.filter(function(c){didMatch=(c.get("name").trim().toLowerCase()+" "+c.get("boothNos").trim().toLowerCase()+" ").match(b.trim().toLowerCase());if(didMatch){return c}})}this.updateLayoutExhibitorList()}},onTapBtnOpenMyExhibitorsList:function(){this.getView().fireEvent("openMyExhibitorsList");this.getSearchFieldAllExhibitorPanelPhone().getController().clearSearchField()},onTapAllExhibitorListPhoneItem:function(d,b,g,a,f,c){this.getView().fireEvent("onTapAllExhibitorListPhoneItem",a)},updateLayoutExhibitorList:function(){var c=this.getAllExhibitorListPhone().getViewItems();for(var a=0,b=c.length;a<b;a++){if(a%2===0){c[a].addCls("presenterlistitemeven")}else{c[a].addCls("presenterlistitemodd")}}}});