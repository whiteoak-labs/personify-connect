Ext.define("Personify.controller.phone.news.NewsManagement",{extend:"Personify.controller.News",inject:["personify"],requires:["Personify.view.phone.news.NewsItemTemplate","Personify.view.phone.news.DetailNews","Personify.model.personify.news.Feeds"],config:{personify:null,isSelect:false,allNewsData:null},control:{newsToolbar:{},newsList:{newstitemtap:"onNewstItemTap",select:"onSelectNewsItem"},searchNewsPhone:{seachclearicontap:"onClearicontapNews",onsearchtextchange:"onSearchNews"},newsView:true},init:function(){this.getNewsToolbar().getController().setActionText("Twitter");this.callParent(arguments)},refreshData:function(){this.init()},onNewstItemTap:function(a,b){this.getView().fireEvent("requestchangeview","Personify.view.phone.news.DetailNews",{newsRecord:a,feedRecord:b})},onSelectNewsItem:function(b,a){if(this.getIsSelect()&&!a.get("expanded")){a.set("expanded",true)}},onSearchNews:function(a){this.onSearchfieldNews(a)},onSearchfieldNews:function(e){var b=e.toLowerCase();var d=this.getAllNewsData();if(!e||e==""){for(var c=0;c<d.length;c++){var a=d[c].store;a.clearFilter()}this.parseNewsData(d)}else{for(var c=0;c<d.length;c++){var a=d[c].store;a.clearFilter();a.filterBy(function(f){if(f.get("title").toLowerCase().indexOf(b)>-1){return f}})}this.parseNewsData(d);this.setIsSelect(true);this.getNewsList().selectAll();this.setIsSelect(false)}},onClearicontapNews:function(){this.onSearchfieldNews("")},updateNewsStore:function(a){this.updateViewData(a)},updateViewData:function(a){this.getNewsList().setStore(a);this.setIsSelect(true);this.getNewsList().select(0);this.setIsSelect(false)},onItemTapListNews:function(f,b,h,a,g,c,d){this.setIsElement(true);this.getView().fireEvent("requestchangeview","Personify.view.phone.news.DetailNews",{record:a,feedRecord:f.getFeedRecord()})},onBack:function(){var a=this;thisView=a.getView();thisView.fireEvent("back",this)}});