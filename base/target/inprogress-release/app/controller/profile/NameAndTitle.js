Ext.define("Personify.controller.profile.NameAndTitle",{extend:"Personify.base.Controller",requires:["Personify.view.profile.contactinfo.NameAndTitleView","Personify.view.profile.contactinfo.OrganizationView","Personify.view.profile.contactinfo.nameandtitle.NameEditFormLikeIos"],control:{},config:{errorMessage:"\nFollowing fields cannot be blank:"},init:function(){this.callParent(arguments)},setRecord:function(b){this.getView().removeAll(true,true);var c=Ext.create("Personify.view.profile.contactinfo.OrganizationView");c.setRecord(b);var a=Ext.create("Personify.view.profile.contactinfo.NameAndTitleView");a.setRecord(b);this.getView().add(a);this.getView().add(c)},setPresenterRecord:function(b){this.getView().removeAll(true,true);var c=Ext.create("Personify.view.profile.contactinfo.OrganizationView");c.getController().setPresenterRecord(b);var a=Ext.create("Personify.view.profile.contactinfo.NameAndTitleView");a.getController().setPresenterRecord(b);this.getView().add(a);this.getView().add(c)},updateEditMode:function(b){this.getView().removeAll(true,true);if(b==true){var c=Ext.create("Personify.view.profile.contactinfo.nameandtitle.NameEditFormLikeIos");c.getController().setRecord(this.getView().getRecord());c.getController().setListOfInfo(Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.PhotoAndRelatedEditStore);var a=Ext.create("Personify.view.profile.contactinfo.nameandtitle.TitleEditFormLikeIos");a.getController().setRecord(this.getView().getRecord());a.getController().setListOfInfo(Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.JobTitleEditStore);this.getView().add(c);this.getView().add(a)}else{this.setRecord(this.getView().getRecord())}},validateData:function(){var d=this.getView().getItems().items;var b=new Array();var c;var d=this.getView().getItems().items;for(var a=0;a<d.length;a++){c=d[a].getController().validateData();if(c!=""){b.push(c)}}if(b.length!=0){Ext.Array.insert(b,0,this.getErrorMessage())}return b},updateParams:function(c){var b=this.getView().getItems().items;for(var a=0;a<b.length;a++){b[a].getController().updateParams(c)}},refresh:function(){if(this.getView()){this.getNameAndTitleEditForm().getController().refresh();var b=this.getNameAndTitleEditForm().getController().getRecordTitle();this.getNameAndTitleView().setRecord(b);var a=this.getNameAndTitleEditForm().getController().getRecordOrganization();this.getOrganizationView().setRecord(a)}}});