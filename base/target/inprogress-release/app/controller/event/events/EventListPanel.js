Ext.define("Personify.controller.event.events.EventListPanel",{extend:"Personify.base.Controller",config:{isButtonHide:true,havePast:false},control:{eventlisting:{itemtap:"onEventItemTap"}},init:function(){},setStore:function(a){this.getEventlisting().getController().setStore(a)},getStore:function(){return this.getEventlisting().getStore()},onTapSearchButton:function(b){var a=this.getEventlisting().getStore();this.checkAndCompileFilter();a.filter(function(d){didMatch=(d.get("shortName").trim().toLowerCase()+" "+d.get("shortDescription").trim().toLowerCase()+" "+d.get("eventType").trim().toLowerCase()+" "+d.get("location").trim().toLowerCase()).match(b.trim().toLowerCase());var c=d.SpeakersListEvent;c.each(function(e){didMatch=didMatch||e.get("name").trim().toLowerCase().match(b.trim().toLowerCase())});if(didMatch){return d}})},onSelectionDateChange:function(b){var a=this.getEventlisting().getStore();this.checkAndCompileFilter();if(b){a.filter(function(d){var c=d.get("startDateTime");c.setHours(0,0,0,0);var e=d.get("endDateTime");if(c<=b&&e>=b){return d}})}},onChangeCalendarView:function(a){var b=this.getEventlisting().getStore();this.checkAndCompileFilter();if(a){b.filter(function(d){var c=d.get("startDateTime");var e=d.get("endDateTime");if(c.getFullYear()*100+c.getMonth()<=a.getFullYear()*100+a.getMonth()&&a.getFullYear()*100+a.getMonth()<=e.getFullYear()*100+e.getMonth()){return d}})}},onSubmitFilter:function(f){var b=this.getEventlisting().getStore();var h=f.EventFormatListCountStore;var e=f.LocationListCountStore;var g=f.TopicListCountStore;this.checkAndCompileFilter();if(h&&h.getAllCount()>0){}if(e&&e.getAllCount()>0){var a=new Array();e.each(function(i){if(i.get("checked")=="checked"){a.push(i.get("code"))}});if(a.length>0){b.filter(function(j){var k=true;for(var l=0;l<a.length;l++){if(j.get("locationState")!=a[l]){k=false}}if(k){return j}})}}if(g&&g.getAllCount()>0){var c=new Array();var d=new Array();g.each(function(i){if(i.get("checked")=="checked"){c.push(i.get("code"));var j=new Array();if(i.SubcodeListEvent){i.SubcodeListEvent.each(function(k){if(k.get("checked")=="checked"){j.push(k.get("code"))}})}d.push(j)}});if(c.length>0){b.filter(function(i){var j=false;var k=i.TopicListEvent;k.each(function(m){var n=Ext.Array.indexOf(c,m.get("code"));if(n>=0){var l=d[n];if(l&&l.length>0){var o=m.SubcodeListEvent;o.each(function(p){if(Ext.Array.contains(l,p.get("code"))){j=true}})}else{j=true}}});if(j&&k.getAllCount()>0){return i}})}}},checkAndCompileFilter:function(){var b=this.getEventlisting().getStore();b.clearFilter();var a=new Array();b.each(function(c){a.push(c)});this.getEventlisting().showRecord(a)},onClearFilterListevent:function(){var a=this.getEventlisting().getStore();a.clearFilter();this.getEventlisting().getController().hidePastEvent(a)},onEventItemTap:function(g,b,f,a,d,c){}});