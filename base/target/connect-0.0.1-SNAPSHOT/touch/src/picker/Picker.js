Ext.define("Ext.picker.Picker",{extend:"Ext.Sheet",alias:"widget.picker",alternateClassName:"Ext.Picker",requires:["Ext.picker.Slot","Ext.TitleBar","Ext.data.Model","Ext.util.InputBlocker"],isPicker:true,config:{baseCls:Ext.baseCSSPrefix+"picker",doneButton:true,cancelButton:true,useTitles:false,slots:null,value:null,height:220,layout:{type:"hbox",align:"stretch"},centered:false,left:0,right:0,bottom:0,defaultType:"pickerslot",toolbarPosition:"top",toolbar:{xtype:"titlebar"}},platformConfig:[{theme:["Windows"],height:"100%",toolbarPosition:"bottom",toolbar:{xtype:"toolbar",layout:{type:"hbox",pack:"center"}},doneButton:{iconCls:"check2",ui:"round",text:""},cancelButton:{iconCls:"delete",ui:"round",text:""}},{theme:["CupertinoClassic"],toolbar:{ui:"black"}},{theme:["MountainView"],toolbarPosition:"bottom",toolbar:{defaults:{flex:1}}}],initialize:function(){var b=this,a=Ext.baseCSSPrefix,c=this.innerElement;this.mask=c.createChild({cls:a+"picker-mask"});this.bar=this.mask.createChild({cls:a+"picker-bar"});b.on({scope:this,delegate:"pickerslot",slotpick:"onSlotPick"})},applyToolbar:function(a){if(a===true){a={}}Ext.applyIf(a,{docked:this.getToolbarPosition()});return Ext.factory(a,"Ext.TitleBar",this.getToolbar())},updateToolbar:function(a,b){if(a){this.add(a)}if(b){this.remove(b)}},applyDoneButton:function(a){if(a){if(Ext.isBoolean(a)){a={}}if(typeof a=="string"){a={text:a}}Ext.applyIf(a,{ui:"action",align:"right",text:"Done"})}return Ext.factory(a,"Ext.Button",this.getDoneButton())},updateDoneButton:function(c,a){var b=this.getToolbar();if(c){b.add(c);c.on("tap",this.onDoneButtonTap,this)}else{if(a){b.remove(a)}}},applyCancelButton:function(a){if(a){if(Ext.isBoolean(a)){a={}}if(typeof a=="string"){a={text:a}}Ext.applyIf(a,{align:"left",text:"Cancel"})}return Ext.factory(a,"Ext.Button",this.getCancelButton())},updateCancelButton:function(b,a){var c=this.getToolbar();if(b){c.add(b);b.on("tap",this.onCancelButtonTap,this)}else{if(a){c.remove(a)}}},updateUseTitles:function(d){var f=this.getInnerItems(),e=f.length,a=Ext.baseCSSPrefix+"use-titles",c,b;if(d){this.addCls(a)}else{this.removeCls(a)}for(c=0;c<e;c++){b=f[c];if(b.isSlot){b.setShowTitle(d)}}},applySlots:function(b){if(b){var c=b.length,a;for(a=0;a<c;a++){b[a].picker=this}}return b},updateSlots:function(a){var b=Ext.baseCSSPrefix,c;this.removeAll();if(a){this.add(a)}c=this.getInnerItems();if(c.length>0){c[0].addCls(b+"first");c[c.length-1].addCls(b+"last")}this.updateUseTitles(this.getUseTitles())},onDoneButtonTap:function(){var a=this._value,b=this.getValue(true);if(b!=a){this.fireEvent("change",this,b)}this.hide();Ext.util.InputBlocker.unblockInputs()},onCancelButtonTap:function(){this.fireEvent("cancel",this);this.hide();Ext.util.InputBlocker.unblockInputs()},onSlotPick:function(a){this.fireEvent("pick",this,this.getValue(true),a)},show:function(){if(this.getParent()===undefined){Ext.Viewport.add(this)}this.callParent(arguments);if(!this.isHidden()){this.setValue(this._value)}Ext.util.InputBlocker.blockInputs()},setValue:function(k,a){var f=this,d=f.getInnerItems(),e=d.length,j,h,c,b,g;if(!k){k={};for(b=0;b<e;b++){k[d[b].config.name]=null}}for(j in k){h=null;g=k[j];for(b=0;b<d.length;b++){c=d[b];if(c.config.name==j){h=c;break}}if(h){if(a){h.setValueAnimated(g)}else{h.setValue(g)}}}f._values=f._value=k;return f},setValueAnimated:function(a){this.setValue(a,true)},getValue:function(c){var b={},a=this.getItems().items,f=a.length,e,d;if(c){for(d=0;d<f;d++){e=a[d];if(e&&e.isSlot){b[e.getName()]=e.getValue(c)}}this._values=b}return this._values},getValues:function(){return this.getValue()},destroy:function(){this.callParent();Ext.destroy(this.mask,this.bar)}},function(){Ext.deprecateProperty(this,"activeCls",null,"Ext.picker.Picker.activeCls has been removed");Ext.deprecateClassMethod(this,"getCard","getActiveItem");Ext.deprecateClassMethod(this,"setCard","setActiveItem")});