Ext.define("Ext.carousel.Infinite",{extend:"Ext.carousel.Carousel",config:{indicator:null,maxItemIndex:Infinity,innerItemConfig:{}},applyIndicator:function(a){if(a){Ext.Logger.error("'indicator' in Infinite Carousel implementation is not currently supported",this)}return},updateBufferSize:function(b){this.callParent(arguments);var e=b*2+1,d=this.innerItems.length,c=this.getInnerItemConfig(),a;this.isItemsInitializing=true;for(a=d;a<e;a++){this.doAdd(this.factoryItem(c))}this.isItemsInitializing=false;this.rebuildInnerIndexes();this.refreshActiveItem()},updateMaxItemIndex:function(b,c){if(c!==undefined){var a=this.getActiveIndex();if(a>b){this.setActiveItem(b)}else{this.rebuildInnerIndexes(a);this.refreshActiveItem()}}},rebuildInnerIndexes:function(n){var c=this.innerIndexToItem,g=this.innerIdToIndex,j=this.innerItems.slice(),h=j.length,b=this.getBufferSize(),d=this.getMaxItemIndex(),l=[],e,k,f,a,m;if(n===undefined){this.innerIndexToItem=c={};this.innerIdToIndex=g={};for(e=0;e<h;e++){m=j[e];a=m.getId();g[a]=e;c[e]=m;this.fireEvent("itemindexchange",this,m,e,-1)}}else{for(e=n-b;e<=n+b;e++){if(e>=0&&e<=d){if(c.hasOwnProperty(e)){Ext.Array.remove(j,c[e]);continue}l.push(e)}}for(e=0,h=l.length;e<h;e++){m=j[e];a=m.getId();f=l[e];k=g[a];delete c[k];g[a]=f;c[f]=m;this.fireEvent("itemindexchange",this,m,f,k)}}},reset:function(){this.rebuildInnerIndexes();this.setActiveItem(0)},refreshItems:function(){var a=this.innerItems,f=this.innerIdToIndex,b,e,c,d;for(c=0,d=a.length;c<d;c++){e=a[c];b=f[e.getId()];this.fireEvent("itemindexchange",this,e,b,-1)}},getInnerItemIndex:function(b){var a=this.innerIdToIndex[b.getId()];return(typeof a=="number")?a:-1},getInnerItemAt:function(a){return this.innerIndexToItem[a]},applyActiveItem:function(c){this.getItems();this.getBufferSize();var b=this.getMaxItemIndex(),a=this.getActiveIndex();if(typeof c=="number"){c=Math.max(0,Math.min(c,b));if(c===a){return}this.activeIndex=c;this.rebuildInnerIndexes(c);c=this.getInnerItemAt(c)}if(c){return this.callParent([c])}}});