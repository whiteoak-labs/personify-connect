Ext.define("Ext.ProgressIndicator",{extend:"Ext.Container",mixins:["Ext.mixin.Progressable"],xtype:"progressindicator",config:{baseCls:Ext.baseCSSPrefix+"progressindicator",hidden:true,modal:true,centered:true,loadingText:{any:"Loading: {percent}%",upload:"Uploading: {percent}%",download:"Downloading: {percent}%"},fallbackText:{any:"Loading",upload:"Uploading",download:"Downloading"},monitoredStates:{upload:true,download:true},showAnimation:!Ext.browser.is.AndroidStock?{type:"slideIn",direction:"left",duration:250,easing:"ease-out"}:null,hideAnimation:!Ext.browser.is.AndroidStock?{type:"slideOut",direction:"left",duration:250,easing:"ease-in"}:null,minProgressOutput:0,maxProgressOutput:1,state:null},constructor:function(){this.emptyTpl=new Ext.XTemplate("");this.callParent(arguments)},getElementConfig:function(){return{reference:"element",classList:["x-container","x-unsized"],children:[{reference:"innerElement",className:Ext.baseCSSPrefix+"progressindicator-inner",children:[{reference:"progressBarText",className:Ext.baseCSSPrefix+"progressindicator-text"},{reference:"progressBar",className:Ext.baseCSSPrefix+"progressindicator-bar",children:[{reference:"progressBarFill",className:Ext.baseCSSPrefix+"progressindicator-bar-fill"}]}]}]}},onStartProgress:function(){if(!this.getParent()){Ext.Viewport.add(this)}this.show()},onEndProgress:function(){this.hide()},onUpdateProgress:function(){this.updateBar()},getLoadingText:function(){var a=this.getState();if(this._loadingText[a]){return this._loadingText[a]}if(this._loadingText.any){return this._loadingText.any}return this.emptyTpl},applyLoadingText:function(b){var a={},d,c;if(Ext.isString(b)){a={any:new Ext.XTemplate(b)}}else{if(b instanceof Ext.XTemplate){a={any:b}}else{for(d in b){c=b[d];a[d]=new Ext.XTemplate(c)}}}if(!a.any){a.any=this.emptyTpl}return a},getFallbackText:function(){var a=this.getState();if(this._fallbackText[a]){return this._fallbackText[a]}if(this._fallbackText.any){return this._fallbackText.any}return""},applyFallbackText:function(a){var d={},c,b;if(Ext.isString(a)){d={any:a}}else{for(c in a){b=a[c];d[c]=b}}if(!d.any){d.any=this.emptyTpl}return d},updateDynamic:function(a){if(!a){this.progressBarText.setHtml(this.getFallbackText());this.progressBar.setWidth("100%")}else{this.updateBar()}return a},updateBar:function(){var c=this.getState();if(this.getMonitoredStates()[c]!==true){this.progressBarText.setHtml(this.getFallbackText());this.progressBar.setWidth("100%");return}var b=this.getProgress()*100;if(!Ext.isNumber(b)){b=0}this.progressBar.setWidth(b+"%");var a=this.getLoadingText();if(a){this.progressBarText.setHtml(this.getLoadingText().apply({state:c,percent:Math.ceil(b)||0}))}else{this.progressBarText.setHtml("")}}});