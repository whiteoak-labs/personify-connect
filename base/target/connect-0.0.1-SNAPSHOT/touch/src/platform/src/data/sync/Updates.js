Ext.data.Updates=Ext.extend(Object,{updates:undefined,constructor:function(a){this.updates=a||[];this.updates.forEach(function(b){if(!(b.c instanceof Ext.data.CS)){b.c=new Ext.data.CS(b.c)}});this.updates.sort(function(d,c){return d.c.compare(c.c)})},push:function(b){var a=this.updates[this.updates.length];if(b.c.lessThan(a)){throw"Error - Updates - Tried to push updates in wrong order. "+a+" "+b}this.updates.push(b)},isEmpty:function(){return this.updates.length<1},forEach:function(b,a){this.updates.forEach(b,a)},forEachAsync:function(d,c,a,b){Ext.data.array.forEachAsync(this.updates,d,c,a,b)},limit:function(b){var a=Math.max(0,this.updates.length-b);if(a>0){this.updates=this.updates.slice(0,b)}return a},chunks:function(f){var e=[];var b=this.updates.length;var h=(b/f)+1;for(var d=0;d<h;d++){var g=d*f;var a=g+f;var c=new Ext.data.Updates();c.updates=this.updates.slice(g,a);e.push(c)}return e},decode:function(j){this.updates=[];if(j){var e=j.length;var f,d,a,b,k,h;for(var g=0;g<e;g++){f=j[g];switch(f.length){case 3:a=d;b=f[0];k=f[1];h=f[2];break;case 4:a=f[0];b=f[1];k=f[2];h=f[3];d=a;break}h=((h instanceof Ext.data.CS)?h:new Ext.data.CS(h));this.updates.push({i:a,p:b,v:k,c:h})}}return this},encode:function(){var e=[];var a=this.updates.length;var c,f,d;for(var b=0;b<a;b++){f=this.updates[b];d=((f.c instanceof Ext.data.CS)?f.c.to_s():f.c);if(f.i===c){e.push([f.p,f.v,d])}else{e.push([f.i,f.p,f.v,d]);c=f.i}}return e}});