Ext.data.CSV=Ext.extend(Ext.data.Config,{v:undefined,constructor:function(a,d,b){var c=false;if(a){a.config_id="csv";Ext.data.CSV.superclass.constructor.call(this,a);if(a.v){this.v=[];this.do_add(a.v)}}if(this.v===undefined){this.v=[];c=true}this.writeAndCallback(c,d,b)},add:function(a,d,b){var c=this.do_add(a);this.writeAndCallback(c,d,b);return this},get:function(a){return this.v[a.r]},setReplicaNumber:function(b,c,a){this.addReplicaNumbers([b],c,a)},addReplicaNumbers:function(a,e,c){var b=[];if(a instanceof Array){b=Ext.data.array.collect(a,function(f){return this.do_add(new Ext.data.CS({r:f}))},this)}else{if(a instanceof Ext.data.CSV){b=Ext.data.array.collect(a.v,function(f){return this.do_add(new Ext.data.CS({r:f.r}))},this)}}var d=Ext.data.array.includes(b,true);this.writeAndCallback(d,e,c)},do_add:function(a){var d=false;if(a instanceof Ext.data.CSV){var b=Ext.data.array.collect(a.v,this.do_add,this);d=Ext.data.array.includes(b,true)}else{if(a instanceof Ext.data.CS){var c=a.r;var b=this.v[c];if(!b||a.greaterThan(b)){this.v[c]=new Ext.data.CS({r:a.r,t:a.t,s:a.s});d=true}}else{if(typeof a=="string"||a instanceof String){d=this.do_add(new Ext.data.CS(a))}else{if(a instanceof Array){var b=Ext.data.array.collect(a,this.do_add,this);d=Ext.data.array.includes(b,true)}else{throw"Error - CSV - do_add - Unknown type: "+(typeof a)+": "+a}}}}return d},changeReplicaNumber:function(a,d,f,c){var b=this.v[a];var e=false;if(b){b.r=d;this.v[a]=undefined;this.v[d]=b;e=true}this.writeAndCallback(e,function(){f.call(c,this,e)},this)},isEmpty:function(){return this.v.length<1},maxChangeStamp:function(){if(!this.isEmpty()){var a=new Ext.data.CS();this.v.forEach(function(c){var b=new Ext.data.CS({t:c.t,s:c.s});a=(b.greaterThan(a)?c:a)},this);return a}},dominates:function(a){return Ext.data.array.any(this.compare(a),function(b){return b>0})},equals:function(a){return Ext.data.array.all(this.compare(a),function(b){return b===0})},compare:function(a){var c,d,e;if(a instanceof Ext.data.CS){d=this.get(a);return[d?d.compare(a):-1]}else{if(a instanceof Ext.data.CSV){e=[];for(c in this.v){d=this.v[c];if(d instanceof Ext.data.CS){var b=a.get(d);e.push(b?d.compare(b):1)}}return e}else{throw"Error - CSV - compare - Unknown type: "+(typeof a)+": "+a}}return[-1]},forEach:function(b,a){this.v.forEach(b,a||this)},encode:function(){return Ext.data.array.collect(this.v,function(){return this.to_s()})},decode:function(a){this.do_add(a);return this},to_s:function(a){var b="CSV: ";this.v.forEach(function(c){b+=c.to_s()+", "},this);return b},as_data:function(){var a={v:Ext.data.array.collect(this.v,function(){return this.to_s()})};a[Ext.data.SyncModel.MODEL]="Ext.data.CSV";return Ext.data.CSV.superclass.as_data.call(this,a)}});