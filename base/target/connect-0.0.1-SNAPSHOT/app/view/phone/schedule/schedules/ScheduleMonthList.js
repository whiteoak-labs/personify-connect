Ext.define("Personify.view.phone.schedule.schedules.ScheduleMonthList",{extend:"Ext.dataview.List",xtype:"schedulelistmonth",config:{baseCls:"selectedFieldButtonNews",scrollToTopOnRefresh:false,deferEmptyText:false,emptyText:'<div class="phone-emptyText">Currently, there are no events in your schedule.<br>You may add an event by selecting an event and choosing ‘Add to My Schedule’</div>',itemTpl:new Ext.XTemplate('<tpl if="expanded">','<div class="p-filter-button-new-enabled">{[this.formatMonth(values.month, values.year)]}',"</div>",'<tpl for="events">','<div class="event-item-phone eventItemPanel-{#} eventItem-{#}" style = "display: -webkit-box; width: 100%; float: left;">','<div style = "display: -webkit-box; -webkit-box-orient: vertical;" class = "p-phone-itemlist-eventday eventItem-{#}">{[Ext.Date.format(values.data.startDateTime, "j")]}<sup class = "p-phone-itemlist-eventday-ordinalsuffix eventItem-{#}">{[Ext.Date.format(values.data.startDateTime, "S")]}</sup></div>','<div style = "-webkit-box-flex: 1.0;" class = "p-phone-itemlist-eventcontent eventItem-{#}">','<div class="eventItem-{#}">{[Personify.utils.ItemUtil.getDisplayTimeForEvent(values.data.startDateTimeString, values.data.endDateTimeString)]}</div>','<div class="p-phone-event-name eventItem-{#}">{data.title}</div>','<div class="p-phone-event-location-registered eventItem-{#}">','<div style = "float:left" class = "p-phone-event-location eventItem-{#}">{data.location}</div>','<div style = "float:right; margin-right: 20px" class = "x-button-normal x-button p-phone-button-removeschedule removebutton-{#}">','<span class="x-button-label removebutton-{#}">Remove</span>',"</div>","</div>","</div>","</div>","</tpl>","<tpl else>",'<div class="p-filter-button-new">{[this.formatMonth(values.month, values.year)]}',"</div>","</tpl>",{formatMonth:function(b,a){var c=new Date("01/01/2013");c.setFullYear(a);c.setMonth(b);return Ext.Date.format(c,"F, Y")}}),listeners:{itemtap:function(l,h,j,f,k,m){var g=false;var h=null;var a=false;var c=k.target.classList;for(var d=0,b=c.length;d<b;d++){if(c[d].indexOf("eventItem")>=0){g=true;h=c[d].split("-")[1];break}else{if(c[d].indexOf("removebutton")>=0){a=true;h=c[d].split("-")[1];break}}}if(g){this.fireEvent("eventitemtap",f.get("events")[h-1])}else{if(a){this.fireEvent("removeitem",f.get("events")[h-1])}else{f.set("expanded",!f.get("expanded"))}}},itemtouchstart:function(m,p,k,g,l,n){var h=false;var j=null;var b=l.target.classList;for(var f=0,a=b.length;f<a;f++){if(b[f].indexOf("eventItem")>=0){h=true;j=b[f].split("-")[1];break}}if(h){var d=".eventItemPanel-"+j;var o=m.getItemAt(p);var c="";if(Ext.isElement(o)){o=Ext.get(o)}if(o){if(o.isComponent){c=o.renderElement.down(d)}else{c=o.down(d)}}c.addCls("p-phone-common-list-selected")}},itemtouchend:function(m,p,k,g,l,n){var h=false;var j=null;var b=l.target.classList;for(var f=0,a=b.length;f<a;f++){if(b[f].indexOf("eventItem")>=0){h=true;j=b[f].split("-")[1];break}}if(h){var d=".eventItemPanel-"+j;var o=m.getItemAt(p);var c="";if(Ext.isElement(o)){o=Ext.get(o)}if(o){if(o.isComponent){c=o.renderElement.down(d)}else{c=o.down(d)}}c.removeCls("p-phone-common-list-selected")}}}}});