Ext.define("Personify.view.event.events.EventList",{extend:"Ext.dataview.DataView",xtype:"schedulelist",controller:"Personify.controller.event.events.EventList",requires:["Personify.controller.event.events.EventList","Personify.view.event.events.EventItem"],config:{cls:"panel-left ",itemId:"listEventItem",xtype:"dataview",scrollable:null,grouped:true,baseCls:"newsFeedItem",pressedCls:"p-dataview-pressed",disableSelection:true,deferEmptyText:false,itemTpl:null,listeners:{itemtap:function(b,d,f,c,g,h){g.preventDefault();var i=b.getStore();var k=this.getGroupOfrecord(c);var j=i.getGroups();var a=this.getGroupValue(k,j);if(g.target.className.indexOf("p-list-event-new-header")>=0){if(g.target.className.indexOf("p-list-expand")>=0){this.hiddenRecord(a);g.target.classList.remove("p-list-expand")}else{this.showRecord(a);g.target.classList.add("p-list-expand")}}else{this.getParent().fireEvent("eventitemlistselect",c)}}}},hiddenRecord:function(b){var a=this.getStore();for(var d=0;d<b.length;d++){var c=a.indexOf(b[d]);var f=this.getItems().items[0].element.dom.childNodes[c];var e=null;if(f.className.indexOf("p-list-event-new-header-item")>=0){e=f.childNodes[1].classList}else{e=f.childNodes[0].classList}e.add("p-hiddenCls")}this.doRefreshHeaders()},showRecord:function(b){var a=this.getStore();for(var d=0;d<b.length;d++){var c=a.indexOf(b[d]);var f=this.getItems().items[0].element.dom.childNodes[c];var e=null;if(f.className.indexOf("p-list-event-new-header-item")>=0){e=f.childNodes[1].classList}else{e=f.childNodes[0].classList}e.remove("p-hiddenCls")}},getGroupOfrecord:function(b){var a=Personify.utils.ItemUtil.convertStringToDate(b.get("startDateTimeString"));var d=Personify.utils.ItemUtil.getMonthEventView(a);var e=Ext.Date.format(a,"m");var c=Personify.utils.ItemUtil.getYearEventView(a);return'<span style="color:transparent;display:none!important">'+c+","+e+"</span>"+d+" "+c},getGroupValue:function(c,a){for(var b=0;b<a.length;b++){if(a[b].name==c){return a[b].children}}return null},updateHeaderCls:function(){if(this.getItems().items[0]){for(var a=0;a<this.getItems().items[0].element.dom.childNodes.length;a++){var b=this.getItems().items[0].element.dom.childNodes[a];if(b.className.indexOf("p-list-event-new-header-item")>=0){if(b.childNodes[1].className.indexOf("p-hiddenCls")<0){b.childNodes[0].classList.add("p-list-expand")}}}}},doRefreshHeaders:function(){this.updateHeaderCls()},initialize:function(){var a=Ext.create("Personify.view.event.events.EventItem");this.setItemTpl(new Ext.XTemplate(a.element.dom.innerHTML,{isRegistered:function(b){if(b){return"Registered"}else{return""}},isMembersOnly:function(b){if(b==false){return""}else{return'<div class="eventStatus">Member Only</div>'}},getTypeOfEvent:function(c){var b=c.isConference;var d=c.eventType;if(!b){if(d=="M"){return"Meeting"}else{if(d=="S"){return"Session"}else{return"Conference"}}}else{return"Conference"}}}));this.callParent(arguments);a.destroy()}});