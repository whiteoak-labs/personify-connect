Ext.define("Personify.controller.event.complexevent.sessions.myschedule.MyScheduleList",{extend:"Personify.base.Controller",control:{view:{itemtap:"onSelectSessionItem",itemtouchstart:"onItemTouchStart",itemtouchend:"onItemTouchEnd"}},onSelectSessionItem:function(j,c,d,b,f,g){var i=this;if(f.target.className.indexOf("x-button")>=0){if(!Personify.utils.PhoneGapHelper.checkConnection()){Ext.Msg.alert("Connection","Please check your internet connection.",Ext.emptyFn);return}var k=Personify.utils.ItemUtil.getMessageMatchTypeOfEvent(b);Ext.Msg.confirm("",k.msg,h);function h(e){Ext.Msg.hide();if(e=="yes"){i.getView().fireEvent("deletesession",{record:b,callback:function(){if(i.getView().getStore().getCount()==1){i.getView().hide();Ext.callback(function(){i.getView().show()},i,[],1000)}Ext.Msg.alert("","Personal session has been removed.")}});i.getView().deselectAll()}}}else{if(b.get("type").toUpperCase()=="PERSONAL"){var i=this;var a=Ext.Viewport.add([{xtype:"personalagenda",record:b,listeners:{removeagenda:function(e,l){i.getView().fireEvent("deletesession",e,l)}}}]);a.show()}else{this.getView().fireEvent("oneventitemtap",j,c,d,b,f,g)}}},onItemTouchStart:function(b,c,g,a,f,d){if(f.target.className.indexOf("x-button")<0){g.addCls("x-item-pressed")}},onItemTouchEnd:function(b,c,g,a,f,d){g.removeCls("x-item-pressed")}});