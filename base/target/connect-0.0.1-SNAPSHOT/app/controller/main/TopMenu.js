Ext.define("Personify.controller.main.TopMenu",{extend:"Personify.base.Controller",inject:["shoppingCartStore"],control:{notificationButton:{tap:"onNotificationButton"},menubarButton:{tap:"onMenuTopTap"},cartItemCheckout:{tap:"onTapCartItemCheckout"},totalItemCheckout:true},config:{shoppingCartStore:null},init:function(){if(this.getShoppingCartStore().getCount()){this.getTotalItemCheckout().setHtml(this.getShoppingCartStore().getCount())}this.getShoppingCartStore().on("load",this.onLoadDone,this)},destroy:function(){this.getShoppingCartStore().un("load",this.onLoadDone,this);return this.callParent()},setNotificationValue:function(a){this.getNotificationButton().setText(a)},onMenuTopTap:function(){this.getView().fireEvent("onmenutap")},onNotificationButton:function(){if(Personify.utils.Configuration.getAllowChangeView()){this.getView().fireEvent("onnotificationtap")}else{Ext.Msg.alert("","Please enter the note title.",Ext.emptyFn)}},disableNotificationButton:function(a){this.getNotificationButton().setDisabled(a)},onTapCartItemCheckout:function(){if(Personify.utils.Configuration.getAllowChangeView()){this.getView().fireEvent("ontapcartitemcheckout")}else{Ext.Msg.alert("","Please enter the note title.",Ext.emptyFn)}},onLoadDone:function(b,a,d){if(d){var c=0;b.each(function(e){c+=e.get("quantity")});this.getTotalItemCheckout().setHtml(c.toString())}},setEnableShoppingCart:function(a){this.getCartItemCheckout().setHidden(!a);this.getTotalItemCheckout().setHidden(!a)}});