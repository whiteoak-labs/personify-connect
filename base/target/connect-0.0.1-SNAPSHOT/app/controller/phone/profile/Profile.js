Ext.define("Personify.controller.phone.profile.Profile",{extend:"Personify.base.Controller",requires:["Personify.view.phone.directory.contactinfo.ContactInfoEditForm","Personify.view.phone.profile.ProfileManagement"],control:{profileNavigationView:{},profileManagementPanel:{listeners:{back:"onBack",requestchangeview:"onRequestChangeView",loggedout:"onLoggedOut",editViewInBackground:"onEditViewInBackground",loadEditView:"onLoadEditView",}}},onLoadData:function(){console.log(new Date().getTime()+" Profile.onLoadData");this.getProfileManagementPanel().getController().onGetData()},onBack:function(){var a=this;var b=a.getView();b.fireEvent("back",this)},onRequestChangeView:function(a,b){this.openView(a,b)},openView:function(a,b,g,d){if(typeof a=="string"){a=Ext.create(a,b)}a.addListener("back",this.onBackProfile,this);a.addListener("backtomain",this.onBackProfile,this);a.addListener("requestchangeview",this.onRequestChangeView,this);a.addListener("loggedout",this.onLoggedOut,this);if(b&&b.record){var e=b.record.get("listeners");if(e){for(var f in e){this.getView().addListener(f,e[f],a)}}}var c=this.getProfileNavigationView();if(c.getActiveItem().xtype!=a.xtype){c.push(a)}},onLoadEditView:function(a){this.launchEditView(a)},launchEditView:function(a){var b=this.getProfileNavigationView();if(a!=null){if(b.getActiveItem().xtype!=a.xtype){b.push(a)}}},onEditViewInBackground:function(a,b){if(typeof a=="string"){a=Ext.create(a,b)}Ext.Viewport.setMasked(false);a.addListener("back",this.onBackProfile,this);a.addListener("backtomain",this.onBackProfile,this);a.addListener("requestchangeview",this.onRequestChangeView,this);a.addListener("loggedout",this.onLoggedOut,this);if(b&&b.record){var c=b.record.get("listeners");if(c){for(var d in c){this.getView().addListener(d,c[d],a)}}}this.getProfileManagementPanel().getController().setBackgroundEditView(a)},onBackProfile:function(a,d){var c=this,b=c.getProfileNavigationView();b.pop();this.getProfileManagementPanel().getController().refreshRecordAfterEditing(d?d:null)},onLoggedOut:function(){this.getView().fireEvent("loggedout")}});