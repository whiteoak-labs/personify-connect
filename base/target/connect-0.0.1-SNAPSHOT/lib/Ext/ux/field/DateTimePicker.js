Ext.define("Ext.ux.field.DateTimePicker",{extend:"Ext.field.Text",alternateClassName:"Ext.form.DateTimePicker",xtype:"datetimepickerfield",requires:["Ext.ux.picker.DateTime","Ext.DateExtras"],config:{ui:"select",picker:true,clearIcon:false,destroyPickerOnHide:true,dateTimeFormat:"m/d/Y h:i A",component:{useMask:true},pickerConfig:null},initialize:function(){this.callParent();this.getComponent().on({scope:this,masktap:"onMaskTap"});this.setPickerConfig(this._picker);this.getComponent().input.dom.disabled=true},syncEmptyCls:Ext.emptyFn,applyValue:function(a){if(!Ext.isDate(a)&&!Ext.isObject(a)){a=null}if(Ext.isObject(a)){a=new Date(a.year,a.month-1,a.day,a.hour,a.minute)}return a},updateValue:function(b){var a=this._picker;if(a&&a.isPicker){a.setValue(b)}if(b!==null){this.getComponent().setValue(Ext.Date.format(b,this.getDateTimeFormat()||Ext.util.Format.defaultDateFormat))}else{this.getComponent().setValue("")}if(this._picker&&this._picker instanceof Ext.ux.picker.DateTime){this._picker.setValue(b)}},updateDateFormat:function(c,a){var b=this.getValue();if(c!=a&&Ext.isDate(b)&&this._picker&&this._picker instanceof Ext.ux.picker.DateTime){this.getComponent().setValue(Ext.Date.format(b,c||Ext.util.Format.defaultDateFormat))}},getValue:function(){if(this._picker&&this._picker instanceof Ext.ux.picker.DateTime){return this._picker.getValue()}return this._value},getFormattedValue:function(b){var a=this.getValue();return(Ext.isDate(a))?Ext.Date.format(a,b||this.getDateTimeFormat()||Ext.util.Format.defaultDateFormat):a},applyPicker:function(b,a){if(a&&a.isPicker){b=a.setConfig(b)}return b},getPicker:function(){var a=this.getPickerConfig(),b=this.getValue();if(a&&!a.isPicker){a=Ext.factory(a,Ext.ux.picker.DateTime);a.on({scope:this,cancel:"onPickerCancel",change:"onPickerChange",hide:"onPickerHide",show:"onPickerShow"});if(b!==null){a.setValue(b)}Ext.Viewport.add(a);this._picker=a}return a},onMaskTap:function(){if(this.getDisabled()){return false}if(this.getReadOnly()){return false}this.getPicker().show();return false},onPickerCancel:function(){var a=this._picker;if(a){Ext.Viewport.remove(a,true)}},onPickerChange:function(a,c){var b=this;b.setValue(c);b.fireEvent("change",b,b.getValue())},onPickerHide:function(){var a=this._picker;if(a){Ext.Viewport.remove(a,true);this._picker=true}},onPickerShow:function(){var a=this;a.fireEvent("show",a)},reset:function(){this.setValue(this.originalValue)}},function(){this.override({getValue:function(a){if(a){Ext.Logger.deprecate("format argument of the getValue method is deprecated, please use getFormattedValue instead",this);return this.getFormattedValue(a)}return this.callOverridden()}});Ext.deprecateMethod(this,"getDatePicker","getPicker")});