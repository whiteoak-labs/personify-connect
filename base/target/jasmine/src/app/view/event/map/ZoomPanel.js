Ext.define("Personify.view.event.map.ZoomPanel",{extend:"Ext.Panel",xtype:"zoompanel",config:{baseCls:Ext.baseCSSPrefix+"zoompanel",layout:{type:"fit",pack:"center"}},initialize:function(){this.touches=0;this.zoom=100;this.element.on({scope:this,touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"});this.callParent()},onTouchStart:function(a){this.touches=a.browserEvent.touches.length},onTouchMove:function(a){a.preventDefault();if(this.touches==2){this.doZoom(a.browserEvent.scale)}},onTouchEnd:function(a){if(this.touches==2){this.doZoom(a.browserEvent.scale)}this.touches=a.browserEvent.touches.length},doZoom:function(a){this.fireEvent("beforeZoom",[this,this.zoom]);this.zoom=100*a;if(this.zoom<100){this.zoom=100}this.element.setStyle("zoom",this.zoom+"%");this.fireEvent("zoom",[this,this.zoom])}});