Ext.define("Personify.controller.exhibitor.DetailExhibitor",{extend:"Personify.base.Controller",requires:"Personify.view.event.complexevent.detailsession.Notes",config:{productExhibitorItem:null,contactExhibitorItem:null},control:{btnMapExhibitor:{tap:"onTapBtnMapExhibitor"},inMySchedule:{tap:"onTapAddToMySchedule"},backToExhibitorList:{tap:"onBackToExhibitorList"},segmentButtonDetailAboutEx:{tap:"onTapSegBtnDetailAboutEx"},segmentButtonDetailProductEx:{tap:"onTapSegBtnDetailProductEx"},segmentButtonDetailContactEx:{tap:"onTapSegBtnDetailContactEx"},segmentButtonDetailNoteEx:{tap:"onTapSegBtnDetailNoteEx"},aboutExhibitorPanel:true,panelContDetailDescExhibitorItem:true,descExhibitorItem:true,segmentedButtonDetail:true},setRecord:function(a){this.getDescExhibitorItem().setRecord(a);if(a){this.onTapSegBtnDetailAboutEx();this.getSegmentedButtonDetail().setPressedButtons(this.getSegmentButtonDetailAboutEx());if(!a.get("boothNos")||a.get("boothNos")===""){this.getBtnMapExhibitor().hide()}else{this.getBtnMapExhibitor().show();var c=Personify.utils.Configuration.getConfiguration().getAt(0).EventsStore.get("mapData");if(c){var b=c.locations[a.get("boothNos")];if(!b){this.getBtnMapExhibitor().hide()}}}if(a.get("isAdded")){this.getInMySchedule().setCls("p-button-RemoveSchedule");this.getInMySchedule().setHtml("Remove")}else{this.getInMySchedule().setCls("p-button-AddToSchedule");this.getInMySchedule().setHtml("Add <br/>Exhibitor")}}},onBackToExhibitorList:function(){this.getView().getParent().setActiveItem(0)},onTapBtnMapExhibitor:function(){if(window.plugins.app47){window.plugins.app47.sendGenericEvent("Exhibitor View on Map")}var a=this.getView().getRecord();var b=a.get("boothNos")?a.get("boothNos"):null;this.getView().fireEvent("onmapit",a,b)},onTapSegBtnDetailAboutEx:function(){this.getPanelContDetailDescExhibitorItem().removeAll(true);var a=this.getPanelContDetailDescExhibitorItem().add({xtype:"aboutExhibitorPanel"});var b=allExhibitorList.getStore();if(!this.getView().getRecord()){a.setRecord(b.getAt(0))}else{a.setRecord(this.getView().getRecord())}},onTapSegBtnDetailProductEx:function(){this.getPanelContDetailDescExhibitorItem().removeAll(false);var a=this.getPanelContDetailDescExhibitorItem().add({xtype:"productExhibitorItem"});var b=allExhibitorList.getStore();if(!this.getView().getRecord()){a.setRecord(b.getAt(0))}else{a.setRecord(this.getView().getRecord())}},onTapSegBtnDetailContactEx:function(){this.getPanelContDetailDescExhibitorItem().removeAll(true);var a=this.getPanelContDetailDescExhibitorItem().add({xtype:"contactExhibitorItem"});var b=allExhibitorList.getStore();if(!this.getView().getRecord()){a.setRecord(b.getAt(0))}else{a.setRecord(this.getView().getRecord())}},onTapSegBtnDetailNoteEx:function(){this.getPanelContDetailDescExhibitorItem().removeAll(true);var a=this.getView().getRecord();var c=this.getView().getMeetingRecord();var d=a.get("masterCustomerID");var b=c.get("productID");this.getPanelContDetailDescExhibitorItem().add({xtype:"sessionnotes",record:a,meetingRecord:c,sessionId:d,eventId:b})},onTapAddToMySchedule:function(){var b=this.getView().getRecord();if(Personify.utils.Configuration.getAllowChangeView()){var a=Personify.utils.Configuration.getCurrentUser();if(a&&a.isLogged()){this.getView().fireEvent("oninmyscheduletap",b)}else{Personify.utils.ItemUtil.needToLogin()}}else{Ext.Msg.alert("","Please enter the note title.",Ext.emptyFn)}},updateAddMyScheduleButton:function(a){if(a.get("isAdded")){this.getInMySchedule().setCls("p-button-RemoveSchedule");this.getInMySchedule().setHtml("Remove")}else{this.getInMySchedule().setCls("p-button-AddToSchedule");this.getInMySchedule().setHtml("Add <br/>Exhibitor")}}});