Ext.define("Personify.controller.phone.attendee.Attendee",{extend:"Personify.base.Controller",control:{ptoolbarAttendeesPhone:{onNavigationButtonTap:"onTapNavigationButton"},attendeeslistpanelphone:{selectattendeesitem:"onSelectAtendeeItemTap"},attendeeInfo:true,attendeeContent:true},init:function(){this.getPtoolbarAttendeesPhone().getController().setHiddenActionButton(true);var a=this.getView().getRecord();this.setRecord(a)},onTapNavigationButton:function(){this.getView().fireEvent("back",this)},setRecord:function(a){if(a.MeetingRegistrantStore){this.getAttendeeslistpanelphone().getController().setStore(a)}},configComponentDetail:function(){var a=this.getAttendeeInfo();a.getController().setListOfInfo(Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.get("listinfoAttendee"));a.getController().updateEnableEditToolBox(false);a.getController().addButtonAddToMyAddressBook(Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.get("useAddToMyAddressBookButton"))},onSelectAtendeeItemTap:function(e){if(window.plugins.app47){window.plugins.app47.sendGenericEvent("Attendee Detail")}var h=this,a=h.getAttendeeInfo();if(e.get("details")==null){var d={ReqMasterCustomerId:Personify.utils.Configuration.getCurrentUser().get("masterCustomerId"),ReqSubCustomerId:Personify.utils.Configuration.getCurrentUser().get("subCustomerId"),IsStaff:Personify.utils.Configuration.getCurrentUser().isStaffMember(),RecordType:e.get("type")},i=e.get("masterCustomerID"),f=e.get("subCustomerID");if(i!=null&&!(i==="")){d.MasterCustomerId=i}if(f!=null&&!(f==="")){d.SubCustomerId=f}var b=Personify.utils.ServiceManager.getStoreManager();var g=b.getProfileStore();var c=Ext.create(g,{dataRequest:d});h.getView().setMasked({xtype:"loadmask"});c.load({callback:function(k,j,m){if(m&&k.length){var l=k[0];e.data["details"]=l;h.getView().fireEvent("requestopendetail","Personify.view.phone.directory.ContactInfoManagement",{record:e.get("details"),recordAttendee:e.get("details"),addToMyAddressBookButton:Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.get("useAddToMyAddressBookButton"),listOfInfo:Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.get("listinfoAttendee")})}else{Ext.Msg.alert("","Cannot load attendee profile.")}h.getView().setMasked(false)}})}else{h.getView().setMasked(false);h.getView().fireEvent("requestopendetail","Personify.view.phone.directory.ContactInfoManagement",{record:e.get("details"),recordAttendee:e.get("details"),addToMyAddressBookButton:Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.get("useAddToMyAddressBookButton"),listOfInfo:Personify.utils.Configuration.getConfiguration().getAt(0).DirectoryStore.get("listinfoAttendee")})}}});