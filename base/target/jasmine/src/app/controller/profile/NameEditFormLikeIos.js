Ext.define("Personify.controller.profile.NameEditFormLikeIos",{extend:"Personify.base.Controller",control:{nameFieldSet:true},config:{editFields:null,currentRecord:null},setListOfInfo:function(b){if(this.getView()&&b&&b.length!=0){var a=this;this.setEditFields(b);b.each(function(c){if(c.get("enabled")==true){var j=null;if(c.get("type")=="text"){j={xtype:"textfield",name:c.get("fieldName"),label:c.get("description"),required:c.get("required"),labelWidth:"40%",cls:"nameAndTitleEditText"}}else{if(c.get("type")=="prefix"){var h=a.getCurrentRecord().namePrefixCodeListStore;var g=[""];for(var e=0;e<h.getCount();e++){var f=h.getAt(e).get("description");g.push({text:f,value:f})}j={xtype:"selectfield",name:c.get("fieldName"),label:c.get("description"),required:c.get("required"),cls:"nameAndTitleEditText",labelWidth:"40%",options:g}}else{var d=a.getCurrentRecord().nameSuffixCodeListStore;var k=[""];for(var e=0;e<d.getCount();e++){var f=d.getAt(e).get("description");k.push({text:f,value:f})}j={xtype:"selectfield",name:c.get("fieldName"),label:c.get("description"),required:c.get("required"),cls:"nameAndTitleEditText",labelWidth:"40%",options:k}}}a.getNameFieldSet().add(j)}});if(this.getCurrentRecord()){this.getView().setValues(this.getCurrentRecord().EntryProfile.getAt(0).NameProfile.getAt(0).getData())}}},setRecord:function(a){this.setCurrentRecord(a);if(a){this.getView().setValues(a.EntryProfile.getAt(0).NameProfile.getAt(0).getData())}},saveData:function(){var a=this.getView().getRecord();if(a){a.set("honorificPrefix",this.getPrefixTextField().getValue());a.set("givenName",this.getFirstNameTextField().getValue());a.set("honorificSuffix",this.getSuffixTextField().getValue());a.set("middleName",this.getMiddleNameTextField().getValue());a.set("familyName",this.getLastNameTextField().getValue())}},validateData:function(){var d="";var a=this.getNameFieldSet().getItems().items;for(var c=0;c<a.length;c++){if(a[c].getRequired()==true&&a[c].getValue().trim()==""){var b=a[c].getLabel();if(b!=""){d=d+b}}}return d},updateParams:function(f){var b=this.getCurrentRecord().EntryProfile.getAt(0).NameProfile.getAt(0).getData();var d=this.getView().getValues();var e={};var a=this.getNameFieldSet().getItems().items;for(var c=0;c<a.length;c++){a[c].blur()}this.getEditFields().each(function(g){if(g.get("enabled")==true){e[g.get("requestName")]=d[g.get("fieldName")]}else{e[g.get("requestName")]=b[g.get("fieldName")]}});if(f.Name.length<=0){f.Name.push(e)}else{Ext.apply(f.Name[0],e)}}});