Ext.define("Personify.controller.schedule.ScheduleList",{extend:"Personify.base.Controller",control:{},init:function(){},setStore:function(b){b.sort({sorterFn:function(e,d){var c=e.get("startDateTime");var h=d.get("startDateTime");var g=c;var f=h;return g>f?1:(g==f?0:-1)},direction:"ASC"});b.setGrouper({groupFn:function(d){var c=d.get("startDateTime");var f=Personify.utils.ItemUtil.getMonthEventView(c);var g=Ext.Date.format(c,"m");var e=Personify.utils.ItemUtil.getYearEventView(c);return'<span style="color:transparent;display:none!important">'+e+","+g+"</span>"+f+" "+e}});b.setRemoteFilter(false);var a=this.getView();if(a&&!a.isDestroyed){a.setStore(b)}this.hidePastEvent(b)},hidePastEvent:function(b){if(b&&b.getCount()>0){var a=new Array();b.each(function(c){var e=new Date();var d=c.get("startDateTime");if(d.getFullYear()<e.getFullYear()){a.push(c)}else{if(d.getFullYear()==e.getFullYear()&&d.getMonth()<e.getMonth()){a.push(c)}}});this.getView().hiddenRecord(a)}},showPastEvent:function(b){if(b&&b.getCount()>0){var a=new Array();b.each(function(c){a.push(c)});this.getView().showRecord(a);this.getView().doRefreshHeaders()}}});