Ext.define("Personify.controller.phone.common.Toolbar",{extend:"Personify.base.Controller",control:{view:{painted:"onPainted"},navigationButton:{tap:"onNavigationButtonTap",release:"onReleaseNavigationButtonTap"},actionButton:{tap:"onActionButtonTap"},backButtonArrow:true},init:function(){var a=this;this.getNavigationButton().element.addListener("touchstart",function(){a.onTapHoldNavigationButtion()},this);this.getNavigationButton().setHidden(this.getView().getHiddenNavigationButton());this.getActionButton().setHidden(this.getView().getHiddenActionButton());this.setUI(this.getView().getUi())},onPainted:function(){if(Ext.os.is.iOS&&Ext.os.version.major>=7){Ext.select(".p-toolbar-container").applyStyles("height: 62px; padding-top: 15px;")}var e=this.getView().getTitle(),f=this.getNavigationButton().element.dom.offsetWidth+13,b=this.getActionButton().element.dom.offsetWidth,d=this.getView().element.dom.offsetWidth;var g=d-(f+b+20);if(b==0){g=d-(f+55+20)}if(e.element.dom.offsetWidth>g){var a=e.element.dom.firstChild,h=20;for(var c=h;c>0;c--){a.setAttribute("style","font-size:"+c+"px");if(e.element.dom.offsetWidth<=g){break}}}},onNavigationButtonTap:function(){this.getView().fireEvent("onNavigationButtonTap",null)},onActionButtonTap:function(){this.getView().fireEvent("actionButtonTap")},setActionText:function(a){this.getActionButton().setText(a)},setActionCls:function(a){this.getActionButton().setCls(a)},setNavigationText:function(a){this.getNavigationButton().setText(a)},setHiddenActionButton:function(a){if(this.getView()){this.getActionButton().setHidden(a)}},setHiddenNavigationButton:function(a){if(this.getView()){this.getNavigationButton().setHidden(a)}},setUI:function(a){if(this.getView()){var b=this;switch(a){case"gray":b.getView().setCls("p-toolbar p-toolbar-gray");break;case"blue":b.getView().setCls("p-toolbar p-toolbar-blue");break}b.getView().setUi(a)}},onReleaseNavigationButtonTap:function(){this.getBackButtonArrow().setCls("p-button-back-arrow")},onTapHoldNavigationButtion:function(){this.getBackButtonArrow().setCls("p-pressed-button-back-arrow")}});