Ext.define("Personify.controller.phone.exhibitor.MyExhibitorPanelPhone",{extend:"Personify.base.Controller",control:{myExhibitorTitleBar:true,searchFieldMyExhibitorListPhone:{onClearIconTap:"onClearIconTapMyExhibitorListPhone",onTextChange:"onTextChangeMyExhibitorListPhone",onSearchKeyUp:"onTextChangeMyExhibitorListPhone"},btnOpenAllExhibitorsList:{tap:"onTapBtnOpenAllExhibitorsList"},myExhibitorListPhone:{itemtap:"onTapMyExhibitorListPhoneItem"}},setRecord:function(b){if(b){var a=b.MyExhibitorStore;this.getMyExhibitorTitleBar().setHtml(Personify.utils.ItemUtil.getShortContent(b.get("shortName"),48));if(a){this.getMyExhibitorListPhone().setStore(a)}else{this.getMyExhibitorFromSql(b)}}},getMyExhibitorFromSql:function(e){var b=Personify.utils.Configuration.getCurrentUser();if(b&&b.isLogged()){var g=this,h=e.ExhibitorStore,a=Personify.utils.ServiceManager.getStoreManager(),i=a.getExhibitorStore(),d=Ext.create(i),c=e.get("productID")||null,j=b.get("masterCustomerId"),f=b.get("subCustomerId");Personify.utils.Sqlite.getMyExhibitor(c,j,f,function(k){if(typeof k=="object"&&k.length>0){h.each(function(m){for(var l=0;l<k.length;l++){if(k[l].exhibitorId==m.get("recordId")){if(!m.get("isAdded")){m.set("isAdded",true)}d.add(m);break}}})}e.MyExhibitorStore=d;g.getMyExhibitorListPhone().setStore(e.MyExhibitorStore)})}},onClearIconTapMyExhibitorListPhone:function(){var a=this.getMyExhibitorListPhone().getStore();a.clearFilter();this.getMyExhibitorListPhone().deselectAll()},onTextChangeMyExhibitorListPhone:function(b){var a=this.getMyExhibitorListPhone().getStore();if(a){a.clearFilter();if(b.trim()!=""){a.filter(function(c){didMatch=(c.get("name").trim().toLowerCase()+" "+c.get("boothNos").trim().toLowerCase()+" ").match(b.trim().toLowerCase());if(didMatch){return c}})}}},onTapBtnOpenAllExhibitorsList:function(){this.getView().fireEvent("openAllExhibitorsList");this.getSearchFieldMyExhibitorListPhone().getController().clearSearchField()},onTapMyExhibitorListPhoneItem:function(d,b,g,a,f,c){this.getView().fireEvent("onTapMyExhibitorListPhoneItem",a)}});